(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[1],{101:function(e,t,n){},131:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(41),i=n.n(c),s=(n(99),n(30)),o=(n(100),n(101),n(8)),u=n(14),l=n(19),b=n(39),d=n(22),j=n(150),f=n(152),p=n(153),h=n(1);var O=function(){var e=Object(o.c)(d.e),t=Object(o.c)(d.b),n=Object(o.b)();return Object(h.jsxs)(f.a,{sx:{display:"flex",marginLeft:"auto"},children:[Object(h.jsx)("p",{children:"Welcome ".concat(e)}),Object(h.jsx)(j.a,{onClick:function(){n(Object(u.c)())},variant:"contained",size:"small",sx:{marginLeft:"10px"},children:"Logout"}),t&&Object(h.jsx)(p.a,{})]})};var g=function(){return Object(o.c)(d.c)?Object(h.jsx)(O,{}):Object(h.jsxs)(f.a,{sx:{marginLeft:"auto"},children:[Object(h.jsxs)(b.b,{to:"login",children:[" ",Object(h.jsx)(j.a,{variant:"contained",children:"Login "})]}),Object(h.jsxs)(b.b,{to:"register",children:[" ",Object(h.jsxs)(j.a,{variant:"contained",sx:{marginLeft:"20px"},children:["Register"," "]})]})]})};var x=function(){var e=Object(o.c)(d.c);return Object(h.jsxs)(f.a,{sx:{display:"flex"},fixed:!0,children:[Object(h.jsx)(b.b,{to:"/",children:Object(h.jsx)(j.a,{variant:"contained",sx:{marginRight:"10px"},children:"Main"})}),e&&Object(h.jsxs)(b.b,{to:"contacts",children:[" ",Object(h.jsx)(j.a,{variant:"contained",children:"Contacts "})]}),Object(h.jsx)(g,{})]})},v=n(3);var m=function(e){var t=e.children;return Object(o.c)(d.c)?t:Object(h.jsx)(v.a,{to:"/login"})};var k=function(e){var t=e.restricted,n=void 0!==t&&t,r=e.children,a=e.redirectTo,c=void 0===a?"/":a;return Object(o.c)(d.c)&&n?Object(h.jsx)(v.a,{to:c}):r},y=Object(r.lazy)((function(){return n.e(8).then(n.bind(null,210))})),L=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(6)]).then(n.bind(null,208))})),w=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(7)]).then(n.bind(null,209))})),I=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(4),n.e(5)]).then(n.bind(null,207))}));var U=function(){return Object(h.jsx)(r.Suspense,{fallback:Object(h.jsx)(p.a,{}),children:Object(h.jsxs)(v.d,{children:[Object(h.jsx)(v.b,{path:"login",element:Object(h.jsx)(k,{restricted:!0,redirectTo:"/contacts",children:Object(h.jsx)(L,{})})}),Object(h.jsx)(v.b,{path:"register",element:Object(h.jsx)(k,{restricted:!0,redirectTo:"/contacts",children:Object(h.jsx)(w,{})})}),Object(h.jsx)(v.b,{path:"/",element:Object(h.jsx)(k,{children:Object(h.jsx)(y,{})})}),Object(h.jsx)(v.b,{path:"contacts",element:Object(h.jsx)(m,{children:Object(h.jsx)(I,{})})}),Object(h.jsx)(v.b,{path:"*",element:Object(h.jsx)(v.a,{to:"/",replace:!0})})]})})},C=n(154);var T,F=function(){var e=Object(o.c)(d.d),t=Object(o.c)(d.a),n=Object(o.b)();return Object(r.useEffect)((function(){l.a.setToken(e),n(Object(u.a)())}),[]),Object(h.jsx)(C.a,{sx:{marginTop:"20px"},fixed:!0,children:t?Object(h.jsx)(p.a,{}):Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(x,{}),Object(h.jsx)(U,{}),Object(h.jsx)(s.a,{})]})})},z=n(21),W=n(17),V=n(37),S=n(88),R=n.n(S),A=n(4),B=Object(W.c)({name:"auth",initialState:{user:{name:"",email:""},token:null,isLoggedIn:!1,isFetchingUser:!0,isLoading:!1},extraReducers:(T={},Object(A.a)(T,u.a.fulfilled,(function(e,t){var n=t.payload;e.user.name=n.name,e.user.email=n.email,e.isLoggedIn=!0,e.isFetchingUser=!1})),Object(A.a)(T,u.a.pending,(function(e){e.isFetchingUser=!0})),Object(A.a)(T,u.a.rejected,(function(e){e.isFetchingUser=!1})),Object(A.a)(T,u.d.pending,(function(e){e.isLoading=!0})),Object(A.a)(T,u.d.fulfilled,(function(e,t){var n=t.payload;l.a.setToken(n.token),e.token=n.token,e.user.name=n.user.name,e.user.email=n.user.email,e.isLoggedIn=!0,e.isLoading=!1})),Object(A.a)(T,u.d.rejected,(function(e){e.isLoading=!1,s.b.error("Something went wrong, please try again")})),Object(A.a)(T,u.b.pending,(function(e){e.isLoading=!0})),Object(A.a)(T,u.b.fulfilled,(function(e,t){var n=t.payload;l.a.setToken(n.token),e.token=n.token,e.user.name=n.user.name,e.user.email=n.user.email,e.isLoggedIn=!0,e.isLoading=!1})),Object(A.a)(T,u.b.rejected,(function(e){e.isLoading=!1,s.b.error("Invalid credentials, try again")})),Object(A.a)(T,u.c.pending,(function(e){e.isLoading=!0})),Object(A.a)(T,u.c.fulfilled,(function(e){l.a.unsetToken(),e.token=null,e.user.name="",e.user.email="",e.isLoggedIn=!1,e.isLoading=!1})),Object(A.a)(T,u.c.rejected,(function(e,t){var n=t.payload;e.isLoading=!1,s.b.info("Something went wrong, try again later ".concat(n))})),T)}).reducer,P=n(84),E={key:"token",storage:R.a,whitelist:"token"},J=Object(z.a)(Object(W.d)({serializableCheck:{ignoredActions:[V.a,V.f,V.b,V.c,V.d,V.e]}})),M=Object(W.a)({reducer:{phonebook:P.a,auth:Object(V.g)(E,B)},middleware:J}),D=Object(V.h)(M),q=n(89);i.a.render(Object(h.jsx)(a.a.StrictMode,{children:Object(h.jsx)(o.a,{store:M,children:Object(h.jsx)(q.a,{loading:null,persistor:D,children:Object(h.jsx)(b.a,{children:Object(h.jsx)(F,{})})})})}),document.getElementById("root"))},14:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"d",(function(){return u})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return b}));var r=n(18),a=n.n(r),c=n(36),i=n(17),s=n(19),o=Object(i.b)("auth/fetchUserInfo",function(){var e=Object(c.a)(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.a.getUsersInfo();case 3:return r=e.sent,e.abrupt("return",r.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",n.rejectWithValue(e.t0.message));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}()),u=Object(i.b)("auth/registerUser",function(){var e=Object(c.a)(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.a.registerUser(t);case 3:return r=e.sent,e.abrupt("return",r.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",n.rejectWithValue(e.t0.message));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}()),l=Object(i.b)("auth/loginUser",function(){var e=Object(c.a)(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.a.loginUser(t);case 3:return r=e.sent,e.abrupt("return",r.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",n.rejectWithValue(e.t0.message));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}()),b=Object(i.b)("auth/logoutUser",function(){var e=Object(c.a)(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.a.logoutUser();case 3:return r=e.sent,e.abrupt("return",r.status);case 7:e.prev=7,e.t0=e.catch(0),n.rejectWithValue(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}())},19:function(e,t,n){"use strict";var r=n(73),a=n(71),c=n(85),i=n.n(c),s=function(){function e(){Object(r.a)(this,e)}return Object(a.a)(e,null,[{key:"registerUser",value:function(e){return this.axiosInstance.post("/users/signup",e)}},{key:"loginUser",value:function(e){return this.axiosInstance.post("/users/login",e)}},{key:"logoutUser",value:function(){return this.axiosInstance.post("/users/logout")}},{key:"getContacts",value:function(){return this.axiosInstance.get("/contacts")}},{key:"deleteContactById",value:function(e){return this.axiosInstance.delete("/contacts/".concat(e))}},{key:"postContact",value:function(e){return this.axiosInstance.post("/contacts",e)}}]),e}();s.axiosInstance=i.a.create({baseURL:"https://connections-api.herokuapp.com"}),s.setToken=function(e){s.axiosInstance.defaults.headers.common.Authorization=e},s.unsetToken=function(){s.axiosInstance.defaults.headers.common.Authorization=""},s.getUsersInfo=function(){return s.axiosInstance.get("/users/current")},t.a=s},22:function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return a})),n.d(t,"e",(function(){return c})),n.d(t,"d",(function(){return i})),n.d(t,"a",(function(){return s}));var r=function(e){return e.auth.isLoggedIn},a=function(e){return e.auth.isLoading},c=function(e){return e.auth.user.name},i=function(e){return e.auth.token},s=function(e){return e.auth.isFetchingUser}},32:function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return l}));var r=n(18),a=n.n(r),c=n(36),i=n(17),s=n(19),o=Object(i.b)("phonebook/FetchContacts",function(){var e=Object(c.a)(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.a.getContacts();case 3:return r=e.sent,e.abrupt("return",r.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",n.rejectWithValue(e.t0.message));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}()),u=Object(i.b)("phonebook/DeleteConctact",function(){var e=Object(c.a)(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.a.deleteContactById(t);case 3:return e.abrupt("return",t);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",n.rejectWithValue(e.t0.message));case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}()),l=Object(i.b)("phonebook/AddContact",function(){var e=Object(c.a)(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.a.postContact(t);case 3:return r=e.sent,e.abrupt("return",r.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",n.rejectWithValue(e.t0.message));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}())},84:function(e,t,n){"use strict";n.d(t,"b",(function(){return u}));var r,a=n(4),c=n(17),i=n(30),s=n(32),o=Object(c.c)({name:"phonebook",initialState:{contacts:[],filter:"",error:null,isLoading:!1},reducers:{updateFilter:function(e,t){var n=t.payload;e.filter=n}},extraReducers:(r={},Object(a.a)(r,s.c.pending,(function(e){e.error=null,e.isLoading=!0})),Object(a.a)(r,s.c.fulfilled,(function(e,t){var n=t.payload;e.contacts=n,e.isLoading=!1})),Object(a.a)(r,s.c.rejected,(function(e,t){var n=t.payload;e.isLoading=!1,i.b.error("Oops, something went wrong, please try again"),e.error=n})),Object(a.a)(r,s.a.pending,(function(e){e.error=null,e.isLoading=!0})),Object(a.a)(r,s.a.fulfilled,(function(e,t){var n=t.payload;e.contacts.push(n),e.isLoading=!1})),Object(a.a)(r,s.a.rejected,(function(e,t){var n=t.payload;e.isLoading=!1,i.b.error("Oops, something went wrong, please try again"),e.error=n})),Object(a.a)(r,s.b.pending,(function(e){e.error=null,e.isLoading=!0})),Object(a.a)(r,s.b.fulfilled,(function(e,t){var n=t.payload;e.contacts=e.contacts.filter((function(e){return e.id!==n})),e.isLoading=!1})),Object(a.a)(r,s.b.rejected,(function(e,t){var n=t.payload;e.isLoading=!1,i.b.error("Oops, something went wrong, please try again"),e.error=n})),r)}),u=o.actions.updateFilter;t.a=o.reducer},99:function(e,t,n){}},[[131,2,3]]]);
//# sourceMappingURL=main.154c2eae.chunk.js.map